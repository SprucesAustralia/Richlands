<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Final Inspection Cleaning Checklist - 514 Boundary Road, Richlands</title>
  <!-- Load Supabase client library -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <style>
    /* [Your existing CSS remains unchanged] */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #f0f4f9 0%, #e0e8f5 100%);
      color: #333;
      line-height: 1.6;
      overflow-x: hidden;
    }
    header {
      background: #01c6a0;
      padding: 1rem;
      text-align: center;
      color: white;
      font-size: 1.2rem;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 10;
      transition: transform 0.3s ease;
    }
    header.hidden {
      transform: translateY(-100%);
    }
    .container {
      max-width: 1080px;
      margin: 1.5rem auto;
      padding: 0 0.5rem;
    }
    a.back {
      display: inline-block;
      margin-bottom: 1rem;
      text-decoration: none;
      color: #01c6a0;
      font-weight: 600;
      padding: 8px 16px;
      border: 2px solid #01c6a0;
      border-radius: 5px;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }
    a.back:hover {
      background-color: #01c6a0;
      color: #fff;
      transform: translateX(-5px);
    }
    h2 {
      font-size: 1.8rem;
      color: #01c6a0;
      text-align: center;
      margin: 1rem 0;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
      animation: fadeInDown 1s ease;
    }
    .info-section {
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      opacity: 0;
      animation: slideUp 1s ease forwards;
      animation-delay: 0.2s;
      transition: all 0.3s ease;
    }
    .info-section label {
      display: block;
      font-weight: 600;
      color: #01c6a0;
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .info-section input[type="text"],
    .info-section input[type="date"] {
      width: 100%;
      box-sizing: border-box;
      font-size: 1rem;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 6px;
      margin-bottom: 1rem;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    .info-section input[type="text"]:focus,
    .info-section input[type="date"]:focus {
      border-color: #01c6a0;
      outline: none;
      box-shadow: 0 0 8px rgba(1, 198, 160, 0.3);
    }
    .checklist-section {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      margin-bottom: 1rem;
      padding: 0.8rem;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0;
      font-size: 1rem;
      color: #01c6a0;
      font-weight: 600;
    }
    .section-header .show-more-btn {
      padding: 6px 12px;
      cursor: pointer;
      background-color: #01c6a0;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 0.8rem;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }
    .section-header .show-more-btn:hover {
      background-color: #019f82;
      transform: scale(1.05);
    }
    .tasks {
      display: none;
      padding: 0.5rem 0;
      animation: slideDown 0.5s ease;
    }
    .tasks.expanded {
      display: block;
    }
    .task-item {
      margin-bottom: 0.5rem;
      padding: 0.5rem;
      background: #f9f9f9;
      border-radius: 5px;
      border: 1px solid #ddd;
    }
    .task-item input[type="checkbox"] {
      margin-right: 0.5rem;
      vertical-align: middle;
    }
    .task-label {
      font-weight: 500;
      color: #333;
      display: inline;
    }
    .upload-section {
      margin-top: 0.8rem;
      padding: 0.5rem;
      background: #f9f9f9;
      border-radius: 5px;
      border: 1px solid #ddd;
    }
    .upload-label {
      display: block;
      color: #666;
      font-size: 0.9rem;
      margin-bottom: 0.3rem;
    }
    input[type="file"] {
      display: none;
    }
    .custom-file-upload {
      display: inline-block;
      padding: 6px 12px;
      cursor: pointer;
      background-color: #01c6a0;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 0.8rem;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }
    .custom-file-upload:hover {
      background-color: #019f82;
      transform: scale(1.05);
    }
    .file-name {
      display: block;
      margin-top: 0.3rem;
      font-size: 0.8rem;
      color: #666;
    }
    .preview {
      display: block;
      margin-top: 0.5rem;
      max-width: 80px;
      max-height: 80px;
      border-radius: 5px;
      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
      transition: opacity 0.3s ease;
    }
    button.submit-btn {
      background-color: #01c6a0;
      color: #fff;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      width: 100%;
      margin-top: 1rem;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }
    button.submit-btn:hover {
      background-color: #019f82;
      transform: scale(1.05);
    }
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideDown {
      from { max-height: 0; opacity: 0; }
      to { max-height: 300px; opacity: 1; }
    }
    @media (min-width: 768px) {
      header {
        padding: 1.5rem;
        font-size: 1.5rem;
      }
      .container {
        padding: 0 1rem;
        margin: 2rem auto;
      }
      a.back {
        font-size: 1rem;
        padding: 10px 20px;
        margin-bottom: 2rem;
      }
      h2 {
        font-size: 2.5rem;
        margin: 2rem 0;
      }
      .info-section {
        padding: 2rem;
        margin-bottom: 2rem;
      }
      .info-section label {
        font-size: 1.2rem;
        margin-bottom: 0.8rem;
      }
      .info-section input[type="text"],
      .info-section input[type="date"] {
        font-size: 1.2rem;
        padding: 12px;
        margin-bottom: 1.5rem;
      }
      .checklist-section {
        padding: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      }
      .section-header {
        padding: 1rem 0;
        font-size: 1.2rem;
      }
      .section-header .show-more-btn {
        padding: 8px 16px;
        font-size: 1rem;
      }
      .tasks {
        padding: 1rem 0;
      }
      .task-item {
        padding: 1rem;
        margin-bottom: 1rem;
      }
      .task-item input[type="checkbox"] {
        margin-right: 1rem;
      }
      .upload-section {
        padding: 1rem;
      }
      .upload-label {
        font-size: 1rem;
      }
      .custom-file-upload, button.submit-btn {
        font-size: 1rem;
        padding: 10px 20px;
      }
      .file-name {
        font-size: 1rem;
      }
      .preview {
        max-width: 150px;
        max-height: 150px;
        margin-top: 1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    514 Boundary Road, Richlands - Post Construction Cleaning - Office Refurbishment
  </header>
  <div class="container">
    <a href="index.html" class="back">← Home</a>
    <h2>Final Inspection Cleaning Checklist</h2>
    <div class="info-section">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" placeholder="Enter your name" required>
      <label for="inspection_date">Inspection Date:</label>
      <input type="date" id="inspection_date" name="inspection_date" required>
    </div>
    <form id="inspectionForm">
      <!-- [Your checklist sections remain unchanged] -->
      <!-- Section 1: General Internal Areas -->
      <div class="checklist-section">
        <div class="section-header">
          1. General Internal Areas
          <button class="show-more-btn" type="button">Show More</button>
        </div>
        <div class="tasks">
          <div class="task-item">
            <input type="checkbox" name="general_internal_floors" id="general_internal_floors">
            <label class="task-label" for="general_internal_floors">Floors (all debris/dust removed, no stains or footprints)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="general_internal_carpets" id="general_internal_carpets">
            <label class="task-label" for="general_internal_carpets">Carpets (vacuumed, spot‐cleaned)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="general_internal_walls" id="general_internal_walls">
            <label class="task-label" for="general_internal_walls">Walls and Ceilings (no dust, smudges, or marks)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="general_internal_doors" id="general_internal_doors">
            <label class="task-label" for="general_internal_doors">Doors, Door Frames, Handles (clean, stickers removed)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="general_internal_skirting" id="general_internal_skirting">
            <label class="task-label" for="general_internal_skirting">Skirting Boards, Window Sills, Ledges (dust‐free)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="general_internal_air_vents" id="general_internal_air_vents">
            <label class="task-label" for="general_internal_air_vents">Air Vents, Fans, Light Fittings (dust‐free)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="general_internal_outlets" id="general_internal_outlets">
            <label class="task-label" for="general_internal_outlets">Outlets and Switches (dust‐free, no residue)</label>
          </div>
        </div>
        <div class="upload-section">
          <span class="upload-label">Upload Photo:</span>
          <label class="custom-file-upload" for="general_internal_file">Upload Photo</label>
          <input type="file" id="general_internal_file" accept="image/*" onchange="updateFileName(event, 'general_internal_file_name'), previewImage(event, 'general_internal_preview')">
          <span id="general_internal_file_name" class="file-name">No file chosen</span>
          <img id="general_internal_preview" class="preview" src="#" alt="Image Preview" style="display:none;">
        </div>
      </div>
      <!-- Section 2: Windows & Glazing -->
      <div class="checklist-section">
        <div class="section-header">
          2. Windows & Glazing
          <button class="show-more-btn" type="button">Show More</button>
        </div>
        <div class="tasks">
          <div class="task-item">
            <input type="checkbox" name="windows_glazing_glass" id="windows_glazing_glass">
            <label class="task-label" for="windows_glazing_glass">Window Glass (streak‐free, no adhesive residue)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="windows_glazing_frames" id="windows_glazing_frames">
            <label class="task-label" for="windows_glazing_frames">Window Frames, Tracks, Sills (clean, debris removed)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="windows_glazing_panels" id="windows_glazing_panels">
            <label class="task-label" for="windows_glazing_panels">Internal Glazing Panels, Partitions, Mirrors (streak‐free)</label>
          </div>
        </div>
        <div class="upload-section">
          <span class="upload-label">Upload Photo:</span>
          <label class="custom-file-upload" for="windows_glazing_file">Upload Photo</label>
          <input type="file" id="windows_glazing_file" accept="image/*" onchange="updateFileName(event, 'windows_glazing_file_name'), previewImage(event, 'windows_glazing_preview')">
          <span id="windows_glazing_file_name" class="file-name">No file chosen</span>
          <img id="windows_glazing_preview" class="preview" src="#" alt="Image Preview" style="display:none;">
        </div>
      </div>
      <!-- Section 3: Joinery & Fixtures -->
      <div class="checklist-section">
        <div class="section-header">
          3. Joinery & Fixtures
          <button class="show-more-btn" type="button">Show More</button>
        </div>
        <div class="tasks">
          <div class="task-item">
            <input type="checkbox" name="joinery_fixtures_cabinetry" id="joinery_fixtures_cabinetry">
            <label class="task-label" for="joinery_fixtures_cabinetry">Cabinetry, Shelves, Cupboards (interior/exterior dust‐free)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="joinery_fixtures_handles" id="joinery_fixtures_handles">
            <label class="task-label" for="joinery_fixtures_handles">Door Handles, Light Switches, Power Outlets (wiped clean)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="joinery_fixtures_kitchen" id="joinery_fixtures_kitchen">
            <label class="task-label" for="joinery_fixtures_kitchen">Kitchen Surfaces, Benchtops, Sinks (clean, no stains/residue)</label>
          </div>
        </div>
        <div class="upload-section">
          <span class="upload-label">Upload Photo:</span>
          <label class="custom-file-upload" for="joinery_fixtures_file">Upload Photo</label>
          <input type="file" id="joinery_fixtures_file" accept="image/*" onchange="updateFileName(event, 'joinery_fixtures_file_name'), previewImage(event, 'joinery_fixtures_preview')">
          <span id="joinery_fixtures_file_name" class="file-name">No file chosen</span>
          <img id="joinery_fixtures_preview" class="preview" src="#" alt="Image Preview" style="display:none;">
        </div>
      </div>
      <!-- Section 4: Sanitary Areas -->
      <div class="checklist-section">
        <div class="section-header">
          4. Sanitary Areas (Bathrooms, Powder Rooms, Amenities)
          <button class="show-more-btn" type="button">Show More</button>
        </div>
        <div class="tasks">
          <div class="task-item">
            <input type="checkbox" name="sanitary_areas_toilets" id="sanitary_areas_toilets">
            <label class="task-label" for="sanitary_areas_toilets">Toilets, Urinals (disinfected, free of stains/odors)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="sanitary_areas_sinks" id="sanitary_areas_sinks">
            <label class="task-label" for="sanitary_areas_sinks">Sinks, Taps (clean, disinfected)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="sanitary_areas_vanities" id="sanitary_areas_vanities">
            <label class="task-label" for="sanitary_areas_vanities">Vanities, Mirrors, Towel Rails, Soap Holders (clean, streak‐free)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="sanitary_areas_shower" id="sanitary_areas_shower">
            <label class="task-label" for="sanitary_areas_shower">Shower Screens (clean, stickers removed)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="sanitary_areas_floors" id="sanitary_areas_floors">
            <label class="task-label" for="sanitary_areas_floors">Floors (mopped, disinfected, no residue)</label>
          </div>
        </div>
        <div class="upload-section">
          <span class="upload-label">Upload Photo:</span>
          <label class="custom-file-upload" for="sanitary_areas_file">Upload Photo</label>
          <input type="file" id="sanitary_areas_file" accept="image/*" onchange="updateFileName(event, 'sanitary_areas_file_name'), previewImage(event, 'sanitary_areas_preview')">
          <span id="sanitary_areas_file_name" class="file-name">No file chosen</span>
          <img id="sanitary_areas_preview" class="preview" src="#" alt="Image Preview" style="display:none;">
        </div>
      </div>
      <!-- Section 5: Balconies, Patios & External Areas -->
      <div class="checklist-section">
        <div class="section-header">
          5. Balconies, Patios & External Areas
          <button class="show-more-btn" type="button">Show More</button>
        </div>
        <div class="tasks">
          <div class="task-item">
            <input type="checkbox" name="external_areas_floors" id="external_areas_floors">
            <label class="task-label" for="external_areas_floors">Floors (swept, washed, free of construction debris)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="external_areas_rubbish" id="external_areas_rubbish">
            <label class="task-label" for="external_areas_rubbish">Rubbish Removal (all construction trash cleared)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="external_areas_appearance" id="external_areas_appearance">
            <label class="task-label" for="external_areas_appearance">Overall Appearance (tidy, ready for inspection)</label>
          </div>
        </div>
        <div class="upload-section">
          <span class="upload-label">Upload Photo:</span>
          <label class="custom-file-upload" for="external_areas_file">Upload Photo</label>
          <input type="file" id="external_areas_file" accept="image/*" onchange="updateFileName(event, 'external_areas_file_name'), previewImage(event, 'external_areas_preview')">
          <span id="external_areas_file_name" class="file-name">No file chosen</span>
          <img id="external_areas_preview" class="preview" src="#" alt="Image Preview" style="display:none;">
        </div>
      </div>
      <!-- Section 6: Final Checks & Waste Disposal -->
      <div class="checklist-section">
        <div class="section-header">
          6. Final Checks & Waste Disposal
          <button class="show-more-btn" type="button">Show More</button>
        </div>
        <div class="tasks">
          <div class="task-item">
            <input type="checkbox" name="final_checks_waste" id="final_checks_waste">
            <label class="task-label" for="final_checks_waste">All Cleaning‐Related Waste in Designated Bins</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="final_checks_treatments" id="final_checks_treatments">
            <label class="task-label" for="final_checks_treatments">No Specialized Treatments/Deep Polishing (excluded unless specified)</label>
          </div>
          <div class="task-item">
            <input type="checkbox" name="final_checks_condition" id="final_checks_condition">
            <label class="task-label" for="final_checks_condition">Overall Site Condition (ready for handover/inspection)</label>
          </div>
        </div>
        <div class="upload-section">
          <span class="upload-label">Upload Photo:</span>
          <label class="custom-file-upload" for="final_checks_file">Upload Photo</label>
          <input type="file" id="final_checks_file" accept="image/*" onchange="updateFileName(event, 'final_checks_file_name'), previewImage(event, 'final_checks_preview')">
          <span id="final_checks_file_name" class="file-name">No file chosen</span>
          <img id="final_checks_preview" class="preview" src="#" alt="Image Preview" style="display:none;">
        </div>
      </div>

      <button type="submit" class="submit-btn">Submit</button>
    </form>
  </div>

  <script>
    // Initialize Supabase client
    const SUPABASE_URL = https://fwapqxmpgaucexojxqyv.supabase.co;
    const SUPABASE_ANON_KEY = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ3YXBxeG1wZ2F1Y2V4b2p4cXl2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA5NzU1MjksImV4cCI6MjA1NjU1MTUyOX0.o9fj4IY7CgKiMeFqIjg1bDKALnjiIfD6AT4W7j7EiTM;
    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    document.addEventListener('DOMContentLoaded', () => {
      // Header hide/show on scroll
      let lastScroll = 0;
      const header = document.querySelector('header');

      window.addEventListener('scroll', () => {
        const currentScroll = window.pageYOffset;
        if (currentScroll > lastScroll && currentScroll > 50) {
          header.classList.add('hidden');
        } else {
          header.classList.remove('hidden');
        }
        lastScroll = currentScroll;
      });

      // Collapsible sections
      const showMoreButtons = document.querySelectorAll('.show-more-btn');
      showMoreButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          const tasks = btn.closest('.section-header').nextElementSibling;
          const isExpanded = btn.classList.toggle('expanded');
          tasks.classList.toggle('expanded');
          btn.textContent = isExpanded ? 'Show Less' : 'Show More';
        });
      });

      // Delay animations for checklist sections
      const sections = document.querySelectorAll('.checklist-section');
      sections.forEach((section, index) => {
        section.style.animationDelay = `${0.3 + index * 0.2}s`;
      });
    });

    function updateFileName(event, fileNameId) {
      const input = event.target;
      const fileNameSpan = document.getElementById(fileNameId);
      if (input.files && input.files[0]) {
        fileNameSpan.textContent = input.files[0].name.length > 20 ? input.files[0].name.substring(0, 20) + '...' : input.files[0].name;
      } else {
        fileNameSpan.textContent = 'No file chosen';
      }
    }

    function previewImage(event, previewId) {
      const input = event.target;
      const preview = document.getElementById(previewId);
      if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
          preview.src = e.target.result;
          preview.style.display = 'block';
          preview.style.opacity = 0;
          setTimeout(() => {
            preview.style.opacity = 1;
          }, 100);
        };
        reader.readAsDataURL(input.files[0]);
      }
    }

    // Form submission with Supabase integration
    document.getElementById('inspectionForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const inspectionDate = document.getElementById('inspection_date').value;
      const checkedTasks = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                              .map(cb => cb.name).join(', ');

      // Insert form data into Supabase table "inspections"
      const { data, error } = await supabase
        .from('inspections')
        .insert([
          { name: name, inspection_date: inspectionDate, tasks: checkedTasks }
        ]);

      if (error) {
        alert(`Error: ${error.message}`);
      } else {
        alert(`Inspection form submitted successfully!\nName: ${name}\nDate: ${inspectionDate}\nChecked Tasks: ${checkedTasks}`);
      }
    });
  </script>
</body>
</html>
