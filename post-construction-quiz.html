<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post-Construction Cleaning Training</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        .question, .user-info {
            margin-bottom: 15px;
        }
        .error {
            color: red;
            display: none;
            font-size: 0.9em;
        }
        .tips {
            background-color: #f0f0f0;
            padding: 15px;
            margin-top: 30px;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="text"], input[type="date"] {
            width: 100%;
            max-width: 300px;
            padding: 5px;
        }
    </style>
</head>
<body>
    <h1>Post-Construction Cleaning Training Quiz</h1>
    <form id="cleaningQuiz">
        <div class="user-info">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div class="user-info">
            <label for="date">Date:</label>
            <input type="date" id="date" name="date" required>
        </div>

        <div class="question">
            <p>1. Dust should be cleaned from top to bottom to prevent re-contamination.</p>
            <input type="radio" name="q1" value="true" required> True
            <input type="radio" name="q1" value="false"> False
            <span class="error" id="error1">Wrong! Cleaning top to bottom prevents dust from falling on cleaned areas.</span>
        </div>

        <div class="question">
            <p>2. It's acceptable to sweep debris into corners to deal with later.</p>
            <input type="radio" name="q2" value="true" required> True
            <input type="radio" name="q2" value="false"> False
            <span class="error" id="error2">Wrong! Debris should be properly collected and removed immediately.</span>
        </div>

        <div class="question">
            <p>3. Windows should be cleaned before floors to avoid drips and splashes.</p>
            <input type="radio" name="q3" value="true" required> True
            <input type="radio" name="q3" value="false"> False
            <span class="error" id="error3">Wrong! Windows should be cleaned first to prevent dirtying floors.</span>
        </div>

        <div class="question">
            <p>4. A final walkthrough is necessary to ensure all areas are clean.</p>
            <input type="radio" name="q4" value="true" required> True
            <input type="radio" name="q4" value="false"> False
            <span class="error" id="error4">Wrong! A final walkthrough ensures quality and completeness.</span>
        </div>

        <div class="question">
            <p>5. It's fine to leave small amounts of construction dust as it will settle naturally.</p>
            <input type="radio" name="q5" value="true" required> True
            <input type="radio" name="q5" value="false"> False
            <span class="error" id="error5">Wrong! All dust must be removed for a professional finish.</span>
        </div>

        <div class="question">
            <p>6. Cleaning should start with wet mopping before dry dusting.</p>
            <input type="radio" name="q6" value="true" required> True
            <input type="radio" name="q6" value="false"> False
            <span class="error" id="error6">Wrong! Dry dusting should come first to remove loose particles.</span>
        </div>

        <div class="question">
            <p>7. Light fixtures should be checked for dust accumulation.</p>
            <input type="radio" name="q7" value="true" required> True
            <input type="radio" name="q7" value="false"> False
            <span class="error" id="error7">Wrong! Light fixtures often collect dust and need attention.</span>
        </div>

        <div class="question">
            <p>8. It's okay to clean floors before removing debris from countertops.</p>
            <input type="radio" name="q8" value="true" required> True
            <input type="radio" name="q8" value="false"> False
            <span class="error" id="error8">Wrong! Clean countertops first to avoid dropping debris on floors.</span>
        </div>

        <div class="question">
            <p>9. A systematic room-by-room approach helps maintain consistency.</p>
            <input type="radio" name="q9" value="true" required> True
            <input type="radio" name="q9" value="false"> False
            <span class="error" id="error9">Wrong! A systematic approach ensures nothing is missed.</span>
        </div>

        <div class="question">
            <p>10. Cleaning should be rushed to meet deadlines, even if quality suffers.</p>
            <input type="radio" name="q10" value="true" required> True
            <input type="radio" name="q10" value="false"> False
            <span class="error" id="error10">Wrong! Quality should never be compromised for speed.</span>
        </div>

        <button type="submit">Submit</button>
    </form>

    <div class="tips">
        <h2>10 Tips for Effective Post-Construction Cleaning</h2>
        <ol>
            <li>Start with a thorough debris removal before detailed cleaning.</li>
            <li>Clean from top to bottom to avoid re-dirtying lower surfaces.</li>
            <li>Use a systematic approach, moving room by room.</li>
            <li>Pay special attention to corners and hidden areas where dust collects.</li>
            <li>Clean windows early to prevent drips on finished floors.</li>
            <li>Vacuum before mopping to remove loose particles.</li>
            <li>Check light fixtures and vents for accumulated dust.</li>
            <li>Use appropriate cleaning solutions for different surfaces.</li>
            <li>Perform a final inspection to catch missed spots.</li>
            <li>Document the cleaning process for quality assurance.</li>
        </ol>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const supabase = Supabase.createClient(
            'https://hnnlowwxfonefjowakzw.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhubmxvd3d4Zm9uZWZqb3dha3p3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA5ODIzNzQsImV4cCI6MjA1NjU1ODM3NH0.Tv4cK3JVP9vo3jDtVi0guDNVXRFsDtstyDUbgEOMJEk'
        );

        const form = document.getElementById('cleaningQuiz');
        const correctAnswers = {
            q1: 'true',
            q2: 'false',
            q3: 'true',
            q4: 'true',
            q5: 'false',
            q6: 'false',
            q7: 'true',
            q8: 'false',
            q9: 'true',
            q10: 'false'
        };

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(form);
            const answers = {
                name: formData.get('name'),
                date: formData.get('date')
            };
            let hasErrors = false;

            // Reset error messages
            document.querySelectorAll('.error').forEach(error => error.style.display = 'none');

            // Check answers
            for (let i = 1; i <= 10; i++) {
                const answer = formData.get(`q${i}`);
                answers[`q${i}`] = answer;
                if (answer !== correctAnswers[`q${i}`]) {
                    document.getElementById(`error${i}`).style.display = 'block';
                    hasErrors = true;
                }
            }

            if (!hasErrors) {
                try {
                    const { data, error } = await supabase
                        .from('quiz_results')
                        .insert([answers]);
                    
                    if (error) throw error;
                    alert('Answers submitted successfully!');
                    form.reset();
                } catch (error) {
                    console.error('Error submitting to Supabase:', error);
                    alert('Failed to submit answers. Please try again.');
                }
            }
        });
    </script>
</body>
</html>
